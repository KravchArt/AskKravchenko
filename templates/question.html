{% extends 'base.html' %}
{% load static %}

{% block title %}{{ question.title }} - AskPlatform{% endblock %}

{% block content %}
<div class="layout">
    <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –≤–æ–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—Ç—ã -->
    <div class="content">
        <!-- –í–æ–ø—Ä–æ—Å -->
        <div class="question-item question-main">
            <div class="question-voting">
                <button class="vote-btn upvote active">
                    <i class="bi bi-caret-up-fill"></i>
                </button>
                <span class="vote-count">{{ question.votes }}</span>
                <button class="vote-btn downvote">
                    <i class="bi bi-caret-down-fill"></i>
                </button>
            </div>
            <div class="question-main">
                <div class="question-header">
                    <div class="question-author">
                        <div class="author-avatar">
                            <i class="bi bi-person-circle"></i>
                        </div>
                        <div class="author-info">
                            <span class="author-name">{{ question.user }}</span>
                            <span class="question-date">{{ question.id }} —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥</span>
                        </div>
                    </div>
                </div>
                <h1 class="question-title">{{ question.title }}</h1>
                <div class="question-content">
                    {{ question.text|linebreaks }}
                </div>
                <div class="question-meta">
                    <div class="question-tags">
                        {% for tag in question.tags %}
                        <a href="{% url 'app:questions_by_tag' tag %}" class="tag">{{ tag }}</a>
                        {% endfor %}
                    </div>
                    <div class="question-stats">
                        <span class="stat">
                            <i class="bi bi-chat"></i>
                            {{ page_obj.paginator.count }} –æ—Ç–≤–µ—Ç–æ–≤
                        </span>
                        <span class="stat">
                            <i class="bi bi-eye"></i>
                            145 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–≤–µ—Ç–æ–≤ -->
        <div class="answers-header">
            <h2>{{ page_obj.paginator.count }} –æ—Ç–≤–µ—Ç–æ–≤</h2>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –æ—Ç–≤–µ—Ç–æ–≤ -->
        <div class="answers-list">
            {% for answer in page_obj %}
            <div class="question-item answer-item">
                <div class="question-voting">
                    <button class="vote-btn upvote {% if answer.is_correct %}active{% endif %}">
                        <i class="bi bi-caret-up-fill"></i>
                    </button>
                    <span class="vote-count">{{ answer.votes }}</span>
                    <button class="vote-btn downvote">
                        <i class="bi bi-caret-down-fill"></i>
                    </button>
                </div>
                <div class="question-main">
                    <div class="question-header">
                        <div class="question-author">
                            <div class="author-avatar">
                                <i class="bi bi-person-circle"></i>
                            </div>
                            <div class="author-info">
                                <span class="author-name">{{ answer.user }}</span>
                                <span class="question-date">{{ answer.id }} –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥</span>
                            </div>
                        </div>
                    </div>
                    <div class="question-content">
                        {{ answer.text|linebreaks }}
                    </div>
                    <div class="question-meta">
                        <div class="answer-actions">
                            <button class="btn btn-outline">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                            <button class="btn btn-link">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- –ü–∞–≥–∏–Ω–∞—Ç–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤ -->
        {% if page_obj.paginator.num_pages > 1 %}
            {% include 'pagination.html' %}
        {% endif %}

        <!-- –§–æ—Ä–º–∞ –æ—Ç–≤–µ—Ç–∞ -->
        <div class="answer-form">
            <h3>–í–∞—à –æ—Ç–≤–µ—Ç</h3>
            <form>
                <div class="form-group">
                    <textarea class="form-control" rows="6" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Å–∞–π–¥–±–∞—Ä -->
    <aside class="sidebar">
        <div class="sidebar-block">
            <h3>üè∑Ô∏è –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏</h3>
            <div class="tags">
                <a href="{% url 'app:questions_by_tag' 'javascript' %}" class="tag">JavaScript</a>
                <a href="{% url 'app:questions_by_tag' 'python' %}" class="tag">Python</a>
                <a href="{% url 'app:questions_by_tag' 'react' %}" class="tag">React</a>
                <a href="{% url 'app:questions_by_tag' 'django' %}" class="tag">Django</a>
                <a href="{% url 'app:questions_by_tag' 'css' %}" class="tag">CSS</a>
                <a href="{% url 'app:questions_by_tag' 'html' %}" class="tag">HTML</a>
            </div>
        </div>

        <div class="sidebar-block">
            <h3>üëë –õ—É—á—à–∏–µ –∞–≤—Ç–æ—Ä—ã</h3>
            <div class="users">
                <div class="user">
                    <span class="user-name">–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤</span>
                    <span class="user-rating">+154</span>
                </div>
                <div class="user">
                    <span class="user-name">–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞</span>
                    <span class="user-rating">+142</span>
                </div>
                <div class="user">
                    <span class="user-name">–ê–ª–µ–∫—Å–µ–π –°–º–∏—Ä–Ω–æ–≤</span>
                    <span class="user-rating">+128</span>
                </div>
            </div>
        </div>
    </aside>
</div>
{% endblock %}